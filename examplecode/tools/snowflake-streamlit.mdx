---
title: Streamlit in Snowflake
---

[Streamlit](https://streamlit.io/) is an open-source Python framework for data scientists and AI/ML engineers to 
deliver dynamic data apps with only a few lines of code.

[Streamlit in Snowflake](https://www.snowflake.com/en/product/features/streamlit-in-snowflake/) enables data scientists 
and Python developers to combine Streamlit's component-rich, open-source Python library with the scale, performance and 
security of the Snowflake platform. Streamlit Python scripts can define user interface (UI) components such as 
filters, graphs, sliders, and more to interact with your data.

In this example, you use Snowsight in your Snowflake account to create a simple Streamlit app that uses 
[Snowflake Cortex Search for RAG](https://docs.snowflake.com/user-guide/snowflake-cortex/cortex-search/cortex-search-overview) 
to ask natural-language questions about a table in your Snowflake account. This table 
contains data that was generated by Unstructured. Answers are returned in natural-language, 
chatbot-style format.

## Prerequisites

...

See [Getting started with Streamlit in Snowflake](https://docs.snowflake.com/developer-guide/streamlit/getting-started).

...

## Create and run the example app

<Steps>
    <Step title="Create the Streamlit app">
        1. In your Snowflake account, on the sidebar, click **Projects > Streamlit**.
        2. Click **+ Streamlit App**.
        3. For **App title**, enter a name for your app, such as `Unstructured Demo Streamlit App`.
        4. For **App location**, chose the target database and schema to store the app in.
        5. For **App warehouse**, choose the warehouse that you want to use to run your app and execute its queries.
        6. Click **Create**.
    </Step>
    <Step title="Add code to the Streamlit app">
        In this step, you add Python code to the Streamlit app that you created in the previous step. 

        This step explains each part of the code as you add it. If you want to skip past these explanations, add the 
        code in the [complete code example](#complete-code-example) all at once, and then skip ahead to 
        the next step, "Run the Streamlit app."

        1. ...
    </Step>
    <Step title="Run the Streamlit app">
        1. In the upper right corner, click **Run**.
        2. For **Enter your search query**, enter some natural-language question about the `TEXT` column in the table.
        3. Press **Enter**.
        
        Snowflake Cortex Search for RAG returns its answer to your question in natural-language, chatbot-style format.
    </Step>
</Steps>

## Complete code example

The full code example for the Streamlit app is as follows:

```python
from snowflake.snowpark.context import get_active_session
import streamlit as st

# Access the current Snowflake session
session = get_active_session()  # This uses the active session inside Snowflake

st.title("Snowflake Cortex Search for RAG with Data from Unstructured")

query = st.text_input("Enter your search query:")

if query:
    with st.spinner("Embedding and retrieving..."):

        top_result_df = session.sql(f"""
            WITH query_embedding AS (
                SELECT SNOWFLAKE.CORTEX.EMBED_TEXT_1024(
                    'snowflake-arctic-embed-l-v2.0', '{query}'
                ) AS EMBED
            )
            SELECT 
                e.TEXT,
                VECTOR_COSINE_SIMILARITY(e.EMBEDDINGS, q.EMBED) AS similarity
            FROM ELEMENTS e, query_embedding q
            ORDER BY similarity DESC
            LIMIT 1
        """).to_pandas()

        context = top_result_df["TEXT"][0]

        # Generate a completion using the top match as context.
        completion_df = session.sql(f"""
            SELECT SNOWFLAKE.CORTEX.COMPLETE(
                'snowflake-arctic',
                CONCAT('Context: ', $$ {context} $$, ' \\n\\nQuestion: {query}\\nAnswer:')
            ) AS RESPONSE
        """).to_pandas()

        # Display the generated response.
        st.write("Answer:")
        st.write(completion_df["RESPONSE"][0])
```

## Additional resources

- [Streamlit in Snowflake documentation](https://docs.snowflake.com/developer-guide/streamlit/about-streamlit)
- [Create and deploy Streamlit apps using Snowsight](https://docs.snowflake.com/developer-guide/streamlit/create-streamlit-ui)
- [Snowflake Solutions Developer Center for Streamlit](https://www.snowflake.com/en/developers/solutions-center/?tags=technology%2Fstreamlit)
- [Streamlit documentation](https://docs.streamlit.io/)

