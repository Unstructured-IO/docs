
## Requirements

To use this example, you will need the following:

- Within your IBM Cloud account, an IBM watsonx.data subscription that contains a Milvus service instance.

  - Create an [IBM Cloud account](https://cloud.ibm.com/registration).

    To complete this example, you will to [create an API key](https://www.ibm.com/docs/en/masv-and-l/cd?topic=cli-creating-your-cloud-api-key) for your IBM Cloud account.

  - Create an [IBM watsonx.data subscription](https://cloud.ibm.com/watsonxdata) in your IBM Cloud account.
  - Create a [Milvus service instance](/ui/destinations/milvus) within your IBM watsonx.data subscription plan.

    To complete this example, you will need the following settings for the Milvus service instance:
    
    - The instance's GRPC host value.
    - The instance's GRPC port value.
    - The name of the target database on the instance.
    - The name of the target collection in the database.
    - The name of the target index in the collection.

- Within your Unstructured account, a workflow that contains a Milvus destination connector.

  - Create an [Unstructured account](https://unstructured.io/signup).
  - Create a [Milvus destination connector](/ui/destinations/milvus) in your Unstructured account.
  - Create a [custom workflow](/ui/workflows#create-a-custom-workflow) that contains the Milvus destination connector in your Unstructured account.

    The workflow must generate [embeddings](/ui/embedding). The workflow's **Embedder** node's selected embedding model provider must be **IBM watson.ai**. The 
    node's selected embedding model must be one of the following models that are offered by IBM watsonx Orchestrate:

    - `all-minilm6-v2`, with 384 dimensions. Per IBM, this model is good for tasks such as information retrieval, clustering, and for detecting sentence similarity.
    - `granite-embedding-107m-multilingual`, with 384 dimensions. Per IBM, this model is good for tasks such as text similarity, retrieval, and search.
    - `granite-embedding-278m-multilingual`, with 768 dimensions.
    - `multilingual-e5-large`, with 1024 dimensions. Per IBM, this model is good for generating text embeddings for text in a language other than English.
    - `slate-125m-english-retrvr`, with 768 dimensions. Per IBM, the `slate-125m-*` models are good for generating embeddings for various inputs such as queries, passages, or documents. Per IBM, the `slate-125m-*` models are two to three times slower but perform slightly better than the `slate-30m-*` models.
    - `slate-125m-english-retrvr-v2`, with 768 dimensions.
    - `slate-30m-english-retrvr`, with 384 dimensions. Per IBM, the `slate-30m-*` models are trained to maximize the cosine similarity between two text inputs so that embeddings can be evaluated based on similarity later. Per IBM, the `slate-30m-*` models are two to three times faster and have slightly lower performance scores than the `slate-125m-*` models.
    - `slate-30m-english-retrvr-v2`, with 384 dimensions.

    Be sure to [run the workflow](/ui/workflows#edit%2C-delete%2C-or-run-a-workflow) to have Unstructured generate the embeddings and store them&mdash;along with 
    Unstructured's processed data representing your organization's source documents and semi-structured data&mdash;in the database 
    that is accessed through the Milvus service instance within your IBM watsonx.data subscription.

## Step 1: ...

In this step, you add an IBM watsonx Orchestrate subscription to your IBM Cloud account.

If you already have an IBM watsonx Orchestrate subscription, then skip ahead to **Step 2**.

1. [Log in to your IBM Cloud account](https://cloud.ibm.com/login).
2. On the sidebar, click the **Resource list** icon. If the sidebar is not visible, click the **Navigation Menu** icon to the far left of the 
   top navigation bar.
3. Click **Create resource**.
4. With **IBM Cloud catalog** selected, search for and select **watsonx Orchestrate**.
5. Complete the on-screen instructions to finish creating the IBM watsonx Orchestrate subscription.

## Step 2: ...

In this step, ...

1. Open your IBM watsonx Orchestrate subscription, if it is not already open. To do this:

   a. [Log in to your IBM Cloud account](https://cloud.ibm.com/login).<br/>
   b. On the sidebar, click the **Resource list** icon. If the sidebar is not visible, click the **Navigation Menu** icon to the far left of the 
      top navigation bar.<br/>
   c. In the list of resources, expand **AI / Machine Learning**, and then click the target watsonx Orchestrate subscription.<br/>
   d. Click **Launch watsonx Orchestrate**.<br/>

2. If the **Chat** page is not already open, click the **Open the main menu** icon to the far left of the 
   top navigation bar, and then click **Chat**.
3. Toward the bottom of the sidebar, click **Create new agent**.
4. On the **Create an agent** page, with **Create from scratch** already selected, enter some **Name** and **Description**for the agent, and then click **Create**.
5. Under **Knowledge source**, in the **Start by adding knowledge** tile, click **Choose knowledge**.
6. On the **Select source** page, click **Milvus**, and then click **Next**.
7. On the **Connect Milvus** page, specify the following settings:

   a. For **GRPC host**, enter the GRPC host value for the Milvus service instance within your IBM watsonx.data subscription.<br/>
   b. For **GRPC port**, enter the GRPC port value for the instance.<br/>
   c. For **Choose an authentication type**, select **Basic authentication**.<br/>
   d. For **Username**, enter `ibmlhapikey`.<br/>
   e. For **Password**, enter the API key for your IBM Cloud account.<br/>
   f. Click **Next**.<br/>

8. On the **Select index** page, specify the following settings:

   a. For **Database**, select the name of the target database on the Milvus service instance within your IBM watsonx.data subscription.<br/>
   b. For **Use Collection or Alias**, select **Collection**.<br/>
   c. For **Collection**, select the name of the target collection in the database.<br/>
   d. For **Index**, select the name of the target index in the collection.<br/>
   e. For **Embedding model**, select the name of the embedding model that matches the one that you specified in your Unstructured workflow.<br/>
   f. for **Title**, select **element_id**.<br/>
   g. For **Body**, select **text**.<br/>
   h. Click **Next**.<br/>

9. On the **Description** page, enter some description for the agent, and then click **Save**.
10. In the list of pages, click **Behavior**.
11. Switch on **Chat with documents**.
10. Click **Deploy**. 
11. On the **Pre-deployment summary** page, click **Deploy**.

## Step 3: ...

In this step, ...

1. If the **Chat** page is not already open in IBM watsonxOrchestrate, click the **Open the main menu** icon to the far left of the 
   top navigation bar, and then click **Chat**.
2. In the sidebar, in the **Agents** list, select the name of the agent that you created in the previous step.
3. In the **Type something** box, enter a question, and then press `Enter`. 
4. The agent will provide an answer.
5. Keep asking as many questions as you want to.