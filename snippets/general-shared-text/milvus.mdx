- For the [Unstructured UI](/ui/overview) or the [Unstructured API](/api-reference/overview), only Milvus cloud-based instances (such as Zilliz Cloud, and Milvus on IBM watsonx.data) are supported.
- For [Unstructured Ingest](/open-source/ingestion/overview), Milvus local and cloud-based instances are supported.

The following video shows how to fulfill the minimum set of requirements for Milvus cloud-based instances, demonstrating Milvus on IBM watsonx.data:

- For Zilliz Cloud, you will need:

  <iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/vwWudGvBEKQ"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
  ></iframe>

  - A [Zilliz Cloud account](https://cloud.zilliz.com/signup).
  - A [Zilliz Cloud cluster](https://docs.zilliz.com/docs/create-cluster).
  - The URI of the cluster, also known as the cluster's _public endpoint_, which takes a format such as 
    `https://<cluster-id>.<cluster-type>.<cloud-provider>-<region>.cloud.zilliz.com`. To get this public endpoint value, do the following:

    1. After you sign in to your Zilliz Cloud account, on the sidebar, in the list of available projects, select the project that contains the cluster.
    2. On the sidebar, click **Clusters**.
    3. Click the tile for the cluster.
    4. On the **Cluster Details** tab, on the **Connect** subtab, copy the **Public Endpoint** value.

  - The username and password to access the cluster, as follows:
  
    1. After you sign in to your Zilliz Cloud account, on the sidebar, in the list of available projects, select the project that contains the cluster.
    2. On the sidebar, click **Clusters**.
    3. Click the tile for the cluster.
    4. On the **Users** tab, copy the name of the user.
    5. Next to the user's name, under **Actions**, click the ellipsis (three dots) icon, and then click **Reset Password**.
    6. Enter a new password for the user, and then click **Confirm**. Copy this new password.

  - The name of the [database](https://docs.zilliz.com/docs/database#create-database) in the instance.
  - The name of the [collection](https://docs.zilliz.com/docs/manage-collections-console#create-collection) in the database.

    The collection must have a defined schema before Unstructured can write to the collection. The minimum viable 
    schema for Unstructured contains only the fields `element_id`, `embeddings`, `record_id`, and `text`, as follows:

    | Field Name | Field Type | Max Length | Dimension |
    |---|---|---|---|
    | `element_id` (primary key field) | **VARCHAR** | `200` | -- |
    | `embeddings` (vector field) | **FLOAT_VECTOR** | -- | `384` |
    | `record_id` | **VARCHAR** | `200` | -- |
    | `text` | **VARCHAR** | `65536` | -- |

    In the **Create Index** area for the collection, next to **Vector Fields**, click **Edit Index**. Make sure that for the 
    `embeddings` field, the **Field Type** is set to **FLOAT_VECTOR** and the **Metric Type** is set to **Cosine**.

    <Warning>
        The number of dimensions for the `embeddings` field must match the number of dimensions for the embedding model that you plan to use.
    </Warning>

- For Milvus on IBM watsonx.data, you will need:

  <iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/hLCwoe2fCnc"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
  ></iframe>

  - An [IBM Cloud account](https://cloud.ibm.com/registration).
  - The [IBM watsonx.data subscription plan](https://cloud.ibm.com/docs/watsonxdata?topic=watsonxdata-getting-started).
  - A [Milvus service instance in IBM watsonx.data](https://cloud.ibm.com/docs/watsonxdata?topic=watsonxdata-adding-milvus-service).
  - The URI of the instance, which takes the format of `https://`, followed by instance's **GRPC host**, followed by a colon and the **GRPC port**. 
    This takes the format of `https://<host>:<port>`. 
    [Get the instance's GRPC host and GRPC port](https://cloud.ibm.com/docs/watsonxdata?topic=watsonxdata-conn-to-milvus).
  - The name of the [database](https://milvus.io/docs/manage_databases.md) in the instance.
  - The name of the [collection](https://milvus.io/docs/manage-collections.md) in the database. Note the collection requirements at the end of this section.
  - The username and password to access the instance. 
    The username for Milvus on IBM watsonx.data is always `ibmlhapikey`. 
    The password for Milvus on IBM watsonx.data is in the form of an IBM Cloud user API key. 
    [Get the user API key](https://cloud.ibm.com/docs/account?topic=account-userapikey&interface=ui).

- For Milvus local, you will need:

  - A [Milvus instance](https://milvus.io/docs/install-overview.md).
  - The [URI](https://milvus.io/api-reference/pymilvus/v2.4.x/MilvusClient/Client/MilvusClient.md) of the instance.
  - The name of the [database](https://milvus.io/docs/manage_databases.md) in the instance.
  - The name of the [collection](https://milvus.io/docs/manage-collections.md) in the database. 
    Note the collection requirements at the end of this section.
  - The [username and password, or token](https://milvus.io/docs/authenticate.md) to access the instance.

All Milvus instances require the target collection to have a defined schema before Unstructured can write to the collection. The minimum viable 
schema for Unstructured contains only the fields `element_id`, `embeddings`, `record_id`, and `text`, as follows. This example code demonstrates the use of the 
[Python SDK for Milvus](https://pypi.org/project/pymilvus/) to create a collection with this schema, 
targeting Milvus on IBM watsonx.data. For the `MilvusClient` arguments to connect to other types of Milvus deployments, see your Milvus provider's documentation:

```python Python
import os

from pymilvus import (
    MilvusClient,
    FieldSchema,
    DataType,
    CollectionSchema
)

DATABASE_NAME   = "default"
COLLECTION_NAME = "my_collection"

client = MilvusClient(
    uri="https://" +
        os.getenv("MILVUS_USER") + 
        ":" + 
        os.getenv("MILVUS_PASSWORD") + 
        "@" + 
        os.getenv("MILVUS_GRPC_HOST") + 
        ":" + 
        os.getenv("MILVUS_GRPC_PORT"),
    db_name=DATABASE_NAME
)

primary_key_field = FieldSchema(
    name="element_id",
    dtype=DataType.VARCHAR,
    is_primary=True,
    max_length=200
)

# IMPORTANT: The number of dimensions for the "embeddings" field
# must match the number of dimensions for the embedding model 
# that you plan to use.
embeddings_field = FieldSchema(
    name="embeddings",
    dtype=DataType.FLOAT_VECTOR,
    dim=384
)

record_id_field = FieldSchema(
    name="record_id",
    dtype=DataType.VARCHAR,
    max_length=200
)

text_field = FieldSchema(
    name="text",
    dtype=DataType.VARCHAR,
    max_length=65535
)

schema = CollectionSchema(
    fields=[
        primary_key_field, 
        embeddings_field,
        record_id_field, 
        text_field
    ]
)

client.create_collection(
    collection_name=COLLECTION_NAME",
    schema=schema,
    using=DATABASE_NAME
)

index_params = client.prepare_index_params()

index_params.add_index(
    field_name="embeddings",
    metric_type="COSINE",
    index_type="IVF_FLAT",
    params={"nlist": 1024}
)

client.create_index(
    collection_name=COLLECTION_NAME,
    index_params=index_params
)

client.load_collection(
    collection_name=COLLECTION_NAME
)
```

Other approaches, such as [creating collections instantly](https://milvus.io/docs/create-collection-instantly.md) or 
[setting nullable and default fields](https://milvus.io/docs/nullable-and-default.md), have not 
been fully evaluated by Unstructured and might produce unexpected results.

Unstructured cannot provide a schema that is guaranteed to work in all 
circumstances. This is because these schemas will vary based on your source files' types; how you 
want Unstructured to partition, chunk, and generate embeddings; any custom post-processing code that you run; and other factors.

