---
title: Python and JavaScript SDKs
description: This documentation covers the usage of the Python and JavaScript SDKs for interacting with the Unstructured API.
---

The [Python](https://github.com/Unstructured-IO/unstructured-python-client) and
[JavaScript](https://github.com/Unstructured-IO/unstructured-js-client)
SDK clients allow for easy interaction with the Unstructured API. Whether you're using the
free Unstructured API, the SaaS Unstructured API, Unstructured API on Azure/AWS or your local
deployment of Unstructured API, you can access the API using the Python or JavaScript SDK.

## Installation

    Before using the SDK to interact with your Unstructured API, install the library:

    <CodeGroup>
    ```bash Python
    pip install unstructured-client
    ```
    ```bash JavaScript
    npm install unstructured-client
    ```
    </CodeGroup>

    <Note>
        The SDKs use semantic versioning and major bumps could bring breaking changes. It is advised to
        pin your installed version.
    </Note>

## Basics

    <Note>
        Python SDK Deprecation Warning (>v0.22.0): The legacy method of passing `shared.PartitionParameters`
        directly to `client.general.partition()` is currently supported but may be deprecated and
        could break in future releases. Users should migrate to the new `shared.PartitionRequest` object 
        to ensure compatibility with future updates.
    </Note>
    <Note>
        Python SDK Deprecation Warning (>v0.22.0): Defining `strategy`, `chunking_strategy`, and `output_format`
        parameters as strings may also be deprecated and could break in future releases. It is
        advised to use the new enum classes for defining those parameters. Ex: `shared.Strategy.HI_RES`
    </Note>

    Let's start with a simple example in which you send a pdf document to be partitioned via the free Unstructured API:

    <CodeGroup>
    ```python Python
    import unstructured_client
    from unstructured_client.models import operations, shared

    client = unstructured_client.UnstructuredClient(
        api_key_auth="YOUR_FREE_API_KEY",
        # You only need to provide your unique API URL if using the paid api
        # server_url="YOUR_API_URL",
    )

    filename = "sample-docs/layout-parser-paper.pdf"
    file = open(filename, "rb")
    req = operations.PartitionRequest(
        partition_parameters=shared.PartitionParameters(
            files=shared.Files(  # The sdk currently only supports sending a single file
                content=file.read(),
                file_name=filename,
            ),
            # Other partition parameters
            strategy=shared.Strategy.AUTO,
            chunking_strategy=shared.ChunkingStrategy.BY_PAGE,
            languages=['eng'], 
            starting_page_number=1,
        ),
    )

    res = client.general.partition(request=req)

    if res.elements is not None:
        # Handle the response
        pass
    ```
    ```javascript JavaScript
    import { openAsBlob } from "node:fs";
    import { UnstructuredClient } from "unstructured-client";
    import { Strategy, ChunkingStrategy } from "unstructured-client/sdk/models/shared";

    const client = new UnstructuredClient({
        security: { apiKeyAuth: "YOUR_FREE_API_KEY" },
        // You only need to provide your unique API URL if using the paid api
        // serverURL: "YOUR_API_URL",
    });

    async function run() {
        const res = await client.general.partition({
            partitionParameters: {
                // The sdk currently only supports sending a single file
                files: await openAsBlob("./sample-file"),
                // Other partition params
                strategy: Strategy.Auto,
                chunkingStrategy: ChunkingStrategy.ByPage,
                languages: ['eng'], 
                startingPageNumber: 1,
            },
        });

        // Handle the response
        console.log(res)
    }

    run();
    ```
    ```python Python (SDK <v0.22.0)
    import unstructured_client
    from unstructured_client.models import shared
    from unstructured_client.models.errors import SDKError

    client = unstructured_client.UnstructuredClient(
        api_key_auth="YOUR_FREE_API_KEY",
        # You only need to provide your unique API URL if using the paid api
        # server_url="YOUR_API_URL",
    )

    filename = "sample-docs/layout-parser-paper.pdf"
    file = open(filename, "rb")

    # Requests not wrapped in `shared.PartitionRequest` may be deprecated in the future
    req = shared.PartitionParameters(
        files=shared.Files(  # The sdk currently only supports sending a single file
            content=file.read(),
            file_name=filename,
        ),
        # Other partition parameters
        languages=['eng'],
        # Defining `strategy` as a string may be deprecated in favor of 
        # enum classes (ex. `shared.ChunkingStrategy.AUTO`)
        strategy="fast",
    )

    try:
        res = client.general.partition(request=req)
        print(res.elements[0])
    except SDKError as e:
        print(e)
    ```
    ```javascript JavaScript (SDK <v0.10.6)
    import { UnstructuredClient } from "unstructured-client";
    import { PartitionResponse } from "unstructured-client/dist/sdk/models/operations";
    import * as fs from "fs";

    const key = "YOUR_FREE_API_KEY";

    const client = new UnstructuredClient({
        security: { apiKeyAuth: "YOUR_FREE_API_KEY" },
        // You only need to provide your unique API URL if using the paid api
        // serverURL: "YOUR_API_URL",
    });

    const filename = "sample-docs/layout-parser-paper.pdf";
    const data = fs.readFileSync(filename);

    client.general.partition({
        // The sdk currently only supports sending a single file
        files: {
            content: data,
            fileName: filename,
        },
        // Other partition params
        strategy: "auto", // Defining `strategy` as a string may be deprecated in favor of enum classes
    })
    ```
    </CodeGroup>

    In the example above we're sending the request to the free Unstructured API, where the API URL is
    the same for all users, so you don't need to provide the server URL. However, you still need to
    authenticate using your individual API Key.

## Paid API

    If you want to use the SaaS Unstructured API, all you need to do is initialize the SDK client with
    the unique API URL that you received in the same email as your API key. For Unstructured API on
    Azure/AWS, use the API URL that you configured through those services.

    <CodeGroup>
    ```python Python
    client = unstructured_client.UnstructuredClient(
        api_key_auth="YOUR_API_KEY",
        server_url="YOUR_API_URL",
    )
    ```
    ```javascript JavaScript
    const client = new UnstructuredClient({
        security: { apiKeyAuth: "YOUR_API_KEY" },
        serverURL: "YOUR_API_URL",
    });
    ```
    </CodeGroup>

## Page Splitting

    In order to speed up processing of long PDF files, set the `splitPdfPage`[*](#parameter-names) parameter to `true`. This will
    cause the PDF to be split into small batches of pages by the client before sending requests to the API. The client
    awaits all parallel requests and combines the responses into a single response object. This will
    work only for PDF files, so don't set it for other types of files.

    The number of parallel requests is controlled by `splitPdfConcurrencyLevel`[*](#parameter-names). 
    The default is 5 and the max is set to 15 to avoid high resource usage and costs.

    If at least one request is successful, the responses are combined into a single response object. An
    error is returned only if all requests failed or there was an error during splitting.

    When using page splitting, note that chunking will not always work as expected since chunking will happen on the
    API side. When chunking elements the whole document context is processed but when we use splitting we only have a part
    of the context. If you need to chunk, you can make a second request to the API with the returned elements.

    <Note>
    Warning: Page splitting causes the `parent_id` metadata generation in elements to be disabled, as it
    requires having context of multiple pages.
    </Note>

    <CodeGroup>
    ```python Python
    res = client.general.partition(request=operations.PartitionRequest(
        partition_parameters=shared.PartitionParameters(
            files=shared.Files(
                content=file.read(),
                file_name=filename,
            ),
            split_pdf_page=True,  # Set `split_pdf_page` parameter to `True` to enable splitting the PDF file
            split_pdf_concurrency_level=10,  # Modify split_pdf_concurrency_level to set the number of parallel requests
        ),
    ))
    ```
    ```javascript JavaScript
    client.general.partition({
        files: {
            content: data,
            fileName: filename,
        },
        // Set `splitPdfPage` parameter to `true` to enable splitting the PDF file
        splitPdfPage: true,
        // Modify splitPdfConcurrencyLevel to set the number of parallel requests
        splitPdfConcurrencyLevel: 10,
    })
    ```
    </CodeGroup>

## Customizing the Client
    ### Retries
        You can also change the defaults for retries through the `retryConfig`[*](#parameter-names)
        when initializing the client. If a request to the API fails, the client will retry the 
        request with an exponential backoff strategy up to a maximum interval of one minute. The
        function keeps retrying until the total elapsed time exceeds `maxElapsedTime`[*](#parameter-names),
        which defaults to one hour:

        <CodeGroup>
        ```python Python
        client = UnstructuredClient(
            api_key_auth="YOUR_API_KEY",
            retry_config=RetryConfig("backoff", BackoffStrategy(
                # time intervals are defined in milliseconds
                initial_interval=500,
                max_interval=60000,
                exponent=1.5,
                max_elapsed_time=900000,  # 15min*60sec*1000ms = 15 minutes
            ), False),
            retry_connection_errors=True,  // Set to `False` to disable retries completely
        )
        ```
        ```javascript JavaScript
        const unstructuredClient = new UnstructuredClient({
            security: { apiKeyAuth: "YOUR_API_KEY" },
            serverURL: "YOUR_API_URL",
            retryConfig: {
                strategy: "backoff",
                backoff: {
                    initialInterval: 500,
                    maxInterval: 60000,
                    exponent: 1.5,
                    maxElapsedTime: 900000, // 15min*60sec*1000ms = 15 minutes
                },
                retryConnectionErrors: true,  // Set to `false` to disable retries completely
            };
        });
        ```
        </CodeGroup>

        If you want to retry on specific response codes, you will have to modify the underlying
        `httpClient` or `requests` object that the SDK wraps.

        The TypeScript SDK makes API calls using an HTTPClient that wraps the native
        [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API). This HTTPClient is a
        thin wrapper around `fetch` and provides the ability to attach hooks around the
        request lifecycle that can be used to modify the request or handle errors and response.

        The HTTPClient constructor takes an optional fetcher argument that can be used to integrate a
        third-party HTTP client, mock out the HTTP client for tests, or feed in fixtures and further
        customize the retry logic to only rety on certain errors.

        The Python SDK relies on `requests`, which you can modify with `HTTPAdapter` and urllib3's 
        [`Retry`](https://urllib3.readthedocs.io/en/stable/reference/urllib3.util.html#urllib3.util.Retry).

        <CodeGroup>
        ```python Python
        import requests
        import urllib3
        import logging
        from requests.adapters import HTTPAdapter
        from urllib3.util import Retry

        logging.basicConfig(level=logging.DEBUG)  # Set logging to debug to see retry attempts

        retry_strategy = Retry(
            total=3,
            backoff_factor=0.1,  # will sleep for [0.0s, 0.2s, 0.4s, 0.8s, …]
            status_forcelist=[429, 500, 502, 503, 504],  # Response codes to retry on
            allowed_methods=["POST"]  # allowed_methods does not include POST by default
        )
        http_client = requests.Session()
        http_client.mount("https://", HTTPAdapter(max_retries=retry_strategy))

        s = UnstructuredClient(
            client=http_client,
            ...
        )
        ```
        ```javascript JavaScript
        const MAX_RETRIES = 3; // Maximum number of retries
        const RETRY_DELAY = 1000; // Delay between retries in milliseconds

        const sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));

        const httpClient = new HTTPClient({
            fetcher: async (originalRequest) => {
                let attempt = 0;

                // Function to create a new request
                const createRequest = async () => {
                    const requestClone = new Request(originalRequest, {
                        body: originalRequest.clone().body,
                        duplex: "half", // Required when sending a body
                    });
                    return requestClone;
                };

                while (attempt < MAX_RETRIES) {
                    try {
                        const request = await createRequest();
                        const res = await fetch(request);

                        // Check the response status
                        if ([503].includes(res.status)) {
                            throw new Error(`Retryable response status: ${res.status}`);
                        }
                        return res; // Return the response if it's successful
                    } catch (error) {
                        attempt++;
                        if (attempt >= MAX_RETRIES) {
                            throw error; // Rethrow the error if max retries are reached
                        }
                        console.log(`Retrying request... (${attempt}/${MAX_RETRIES})`);
                        await sleep(RETRY_DELAY); // Wait before retrying
                    }
                }
            },
        });

        const sdk = new UnstructuredClient({ 
            httpClient,
            security: {apiKeyAuth: "YOUR_API_KEY"},
            serverURL: "YOUR_API_URL",
        });
        ```
        </CodeGroup>

    ### Disabling SSL Validation

        <CodeGroup>
        ```python Python
        # If verify is set to `False`, requests will accept any TLS certificate
        # presented by the server and ignore hostname mismatches and/or expired certificates, 
        # which will make your application vulnerable to man-in-the-middle (MitM) attacks.
        # Only set this to `False` for testing.
        http_client = requests.Session()
        http_client.verify = False

        s = UnstructuredClient(
            client=http_client,
            ...
        )
        ```
        ```javascript JavaScript

        ```
        </CodeGroup>

## Handling the Response

    The partition response defaults to a dict format that can be converted to Unstructured elements with
    the `elements_from_dicts` utility function as seen below. Otherwise, the api response can be sent directly 
    to your vector store or another destination.

    <CodeGroup>
    ```python Python
    from unstructured.staging.base import elements_from_dicts

    ...

    if res.elements is not None:
        elements = elements_from_dicts(response.elements)
    ```
    </CodeGroup>

## Parameters & examples

    #### Parameter names 
        The parameter names used in this document are for the JavaScript SDK, which follow camelCase
        convention (while the Python SDK uses snake_case). Other than this difference in naming convention, 
        the names used in the SDKs are the same across all methods.

    * Refer to the [API parameters](/api-reference/api-services/api-parameters) page for the full list of available parameters.
    * Refer to the [Examples](/api-reference/api-services/examples) page for some inspiration on using the parameters.

[//]: # (TODO: when we have the concepts page shared across products, link it from here for the users to learn about partition strategies, chunking strategies and other important shared concepts)
